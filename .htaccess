RewriteEngine On

# Handle continent subdomains
RewriteCond %{HTTP_HOST} ^(africa|asia|europe|north-america|south-america|caribbean)\.(localhost|iforeveryoungtours\.com)(:[0-9]+)?$ [NC]
RewriteCond %{REQUEST_URI} !^/continents/
RewriteRule ^(.*)$ continents/%1/$1 [L]

# Handle country subdomains (2 or 3 letter codes)
RewriteCond %{HTTP_HOST} ^visit-([a-z]{2,3})\.(localhost|iforeveryoungtours\.com)(:[0-9]+)?$ [NC]
RewriteCond %{REQUEST_URI} !^/subdomain-handler\.php$
RewriteRule ^.*$ subdomain-handler.php [L]

# Redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Redirect /Home to /index.php (case-insensitive)
RewriteRule ^Home/?$ index.php [NC,L]

# Redirect index.php to /Home (for clean URLs)
RewriteCond %{THE_REQUEST} ^GET.*index\.php [NC]
RewriteRule ^index\.php$ /Home [R=301,NC,L]

# Remove .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Custom error pages
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php
