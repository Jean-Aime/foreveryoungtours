RewriteEngine On

# Handle country subdomains
RewriteCond %{HTTP_HOST} ^visit-([a-z]{3})\.(localhost|iforeveryoungtours\.com)(:[0-9]+)?$ [NC]
RewriteCond %{REQUEST_URI} !^/subdomain-handler\.php$
RewriteRule ^.*$ subdomain-handler.php [L]

# Redirect www to non-www
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

# Remove .php extension
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php [L]

# Custom error pages
ErrorDocument 404 /404.php
ErrorDocument 500 /500.php
